



# Server Configuration
# Render assigns port dynamically via PORT environment variable
server.port=${PORT:8080}
spring.application.name=sudharshini-stock-management

# SQLite Database Configuration
# On Render free tier, use /opt/render/project/data for persistence
spring.datasource.url=jdbc:sqlite:${DATABASE_PATH:/opt/render/project/data/stock_management.db}
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# JPA Configuration
spring.jpa.properties.hibernate.dialect=org.hibernate.community.dialect.SQLiteDialect

# Email Configuration - ALL FROM ENVIRONMENT VARIABLES
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST:smtp.gmail.com}
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2
spring.mail.properties.mail.smtp.connectiontimeout=30000
spring.mail.properties.mail.smtp.timeout=30000
spring.mail.properties.mail.smtp.writetimeout=30000

# Admin Email
admin.email=${ADMIN_EMAIL:admin@sudharshini.com}

# JWT Configuration - FROM ENVIRONMENT
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Google OAuth Configuration - FROM ENVIRONMENT
google.client.id=${GOOGLE_CLIENT_ID}
google.client.secret=${GOOGLE_CLIENT_SECRET}

# CORS Configuration - FROM ENVIRONMENT
# For production, this should be your frontend URL on Render
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}

# Error Handling - Return JSON instead of Whitelabel HTML
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=never
server.error.include-exception=false
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
file.upload.dir=${FILE_UPLOAD_DIR:/opt/render/project/data/uploads/products}

# Google Maps API Configuration - FROM ENVIRONMENT
google.maps.api.key=${GOOGLE_MAPS_API_KEY}
